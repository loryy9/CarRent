<form action="<%= auto ? `/dashboard/updateAuto/${auto.id}` : '/dashboard/addAuto' %>" method="POST" enctype="multipart/form-data" class="bg-dark text-white p-5 rounded shadow-lg col-lg-8 mx-auto mt-5">
    <h3 class="text-warning mb-4 text-center"><%= auto ? 'Modifica Auto' : 'Inserisci una nuova auto' %></h3>

    <div class="row g-3">
        <div class="col-md-6">
            <label for="marca" class="form-label">Marca</label>
            <input type="text" class="form-control bg-black text-white border-secondary" id="marca" name="marca" value="<%= auto ? auto.marca : '' %>" required>
        </div>
        <div class="col-md-6">
            <label for="modello" class="form-label">Modello</label>
            <input type="text" class="form-control bg-black text-white border-secondary" id="modello" name="modello" value="<%= auto ? auto.modello : '' %>" required>
        </div>
    </div>

    <div class="row g-3 mt-3">
        <div class="col-md-6">
            <label for="carburante" class="form-label">Carburante</label>
            <select class="form-select bg-black text-white border-secondary" id="carburante" name="carburante" required>
                <option value="" <%= !auto ? 'disabled selected' : '' %>>Seleziona un carburante</option>
                <option value="Benzina" <%= auto && auto.carburante === 'Benzina' ? 'selected' : '' %>>Benzina</option>
                <option value="Diesel" <%= auto && auto.carburante === 'Diesel' ? 'selected' : '' %>>Diesel</option>
                <option value="Elettrica" <%= auto && auto.carburante === 'Elettrica' ? 'selected' : '' %>>Elettrica</option>
            </select>
        </div>
        <div class="col-md-6">
            <label for="immagine" class="form-label">Immagine</label>
            <input type="file" class="form-control bg-black text-white border-secondary" id="immagine" name="immagine" accept="image/*" <%= auto ? '' : 'required' %>>
            <% if (auto) { %>
                <small class="form-text text-muted">Lascia vuoto per mantenere l'immagine attuale</small>
            <% } %>
        </div>
    </div>

    <div class="row g-3 mt-3">
        <div class="col-md-6">
            <label for="tipologia" class="form-label">Tipologia</label>
            <select class="form-select bg-black text-white border-secondary" id="tipologia" name="tipologia" required>
                <option value="" <%= !auto ? 'disabled selected' : '' %>>Seleziona una tipologia</option>
                <option value="SUV" <%= auto && auto.tipologia === 'SUV' ? 'selected' : '' %>>SUV</option>
                <option value="Berlina" <%= auto && auto.tipologia === 'Berlina' ? 'selected' : '' %>>Berlina</option>
                <option value="Sportiva" <%= auto && auto.tipologia === 'Sportiva' ? 'selected' : '' %>>Sportiva</option>
                <option value="Utilitaria" <%= auto && auto.tipologia === 'Utilitaria' ? 'selected' : '' %>>Utilitaria</option>
            </select>
        </div>
    </div>

    <div class="row g-3 mt-3">
        <div class="col-md-4">
            <label for="velocita" class="form-label">Velocità (km/h)</label>
            <input type="number" class="form-control bg-black text-white border-secondary" id="velocita" name="velocita" value="<%= auto ? auto.velocita : '' %>" min="0" required>
        </div>
        <div class="col-md-4">
            <label for="cavalli" class="form-label">Cavalli</label>
            <input type="number" class="form-control bg-black text-white border-secondary" id="cavalli" name="cavalli" value="<%= auto ? auto.cavalli : '' %>" min="0" required>
        </div>
        <div class="col-md-4">
            <label for="prezzo_giornaliero" class="form-label">Prezzo Giornaliero (€)</label>
            <input type="number" class="form-control bg-black text-white border-secondary" id="prezzo_giornaliero" name="prezzo_giornaliero" value="<%= auto ? auto.prezzo_giornaliero : '' %>" step="0.01" min="0" required>
        </div>
    </div>

    <div class="d-flex justify-content-between mt-4">
        <a href="/dashboard?alert=elencoAuto" class="btn btn-secondary px-4 py-2">Annulla</a>
        <button type="submit" class="btn btn-warning px-5 py-2"><%= auto ? 'Salva Modifiche' : 'Inserisci Auto' %></button>
    </div>
</form>